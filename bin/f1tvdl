#!/usr/bin/env python

import sys
import os
import inspect

# First, in case we are not a proper Python module yet we grab our path and add it to PYTHONPATH
import traceback

cmd_subfolder = os.path.realpath(os.path.abspath(os.path.join(os.path.split(inspect.getfile( inspect.currentframe() ))[0],"..")))
if cmd_subfolder not in sys.path:
  sys.path.insert(0, cmd_subfolder)

from tf.errors import TDCCommandNotFoundError

if os.environ.get('LC_CTYPE', '') == 'UTF-8':
  os.environ['LC_CTYPE'] = 'en_US.UTF-8'
import tf.main


def main():
  try:
    return tf.main.main()
  except TDCCommandNotFoundError:
    sys.stderr.write("Error: Invalid command.")
  except Exception as exc:
    if bool(os.environ.get('LE_TDC_DEVELOP', False)) and exc:
      sys.stderr.write(traceback.format_exc())
    else:
      sys.stderr.write("Error: {}".format(exc))


if __name__ == '__main__':
  sys.exit(main())
